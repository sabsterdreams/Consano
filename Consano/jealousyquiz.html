<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <div class="header">
<a href="Consano.html"> <img src="images/logo.png" alt="Go to home page friendship issues" width="150"></a>
  
  
  <title>Friendship Jealousy Quiz</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #5c96a9;
      color: #333;
      max-width: 600px;
      margin: auto;
      padding: 40px 20px;
    }

    .quiz-box {
      border: 2px solid #fb8f8f;
      padding: 25px;
      border-radius: 10px;
      background-color: #fff;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    h1, h2 {
      color: white;
      text-align: center;
    }

    .question {
      font-size: 1.2em;
      margin-bottom: 15px;
    }

    .options label {
      display: block;
      margin-bottom: 8px;
      cursor: pointer;
    }

    button {
      background-color: #fb8f8f;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }

    button:hover {
      background-color: #a34e6b;
    }

    #result {
      font-weight: bold;
      text-align: center;
      margin-top: 30px;
      padding: 20px;
      border-radius: 10px;
      background-color: #fbe6ed;
      border: 2px dashed #d78ca5;
    }
  </style>
</head>
<body>

  <h1>Friendship Jealousy Quiz</h1>

  <div class="quiz-box" id="quizBox">
    <div id="questionText" class="question"></div>
    <div id="options" class="options"></div>
    <button id="nextButton">Next</button>
  </div>

  <div id="result" style="display: none;"></div>

  <script>
    const questions = [
      "They are scared of failure",
      "They make comments comparing themselves to you",
      "They constantly look and ask about your test scores",
      "They are very competitive",
      "They leave you out or ignore you",
      "They go quiet when you achieve something",
      "They make comments that minimise your achievements",
      "They make passive aggressive comments",
      "They make a big deal out of everything they achieve, even if it's small"
    ];

    const answerValues = [-2, -1, 0, 1, 2]; // Maps to 1-5 choices
    const referenceVector = [2, 2, 2, 2, 2, 2, 2, 2, 2]; // jealousy pattern

    let currentQuestion = 0;
    let userVector = [];

    const questionText = document.getElementById("questionText");
    const options = document.getElementById("options");
    const nextButton = document.getElementById("nextButton");
    const resultBox = document.getElementById("result");
	const answerLabels = [
  "Strongly Disagree",
  "Disagree",
  "Neutral",
  "Agree",
  "Strongly Agree"
];
    function showQuestion() {
      questionText.textContent = `Q${currentQuestion + 1}. ${questions[currentQuestion]}`;
      options.innerHTML = "";

      for (let i = 0; i < answerValues.length; i++) {
        const label = document.createElement("label");
        label.innerHTML = `
          <input type="radio" name="option" value="${answerValues[i]}" required>
          ${answerLabels[i]} 
        `;
        options.appendChild(label);
      }
    }

    function calculateScore(v, w) {
      let dot = 0, vLen = 0, wLen = 0;

      for (let i = 0; i < v.length; i++) {
        dot += v[i] * w[i];
        vLen += v[i] ** 2;
        wLen += w[i] ** 2;
      }

      const angle = Math.acos(dot / (Math.sqrt(vLen) * Math.sqrt(wLen)));
      let percentage = (1 - (angle / Math.PI)) * 100;
      return Math.round(percentage * 100) / 100;
    }

    nextButton.addEventListener("click", () => {
      const selected = document.querySelector('input[name="option"]:checked');
      if (!selected) {
        alert("Please select an answer.");
        return;
      }

      userVector.push(Number(selected.value));
      currentQuestion++;

      if (currentQuestion < questions.length) {
        showQuestion();
      } else {
        // Finish and show result
        document.getElementById("quizBox").style.display = "none";
        const score = calculateScore(userVector, referenceVector);

        let feedback = "";
        if (score > 80) {
          feedback = "High Jealousy Detected – This friendship may be emotionally draining. Pay attention to patterns.";
        } else if (score > 50) {
          feedback = "Moderate Jealousy – Some dynamics may be unhealthy. Consider healthy boundaries.";
        } else {
          feedback = "Low Jealousy – This friendship seems emotionally balanced.";
        }

        resultBox.innerHTML = `
          <h2>Jealousy Alignment Score: ${score}%</h2>
          <p>${feedback}</p>
        `;
        resultBox.style.display = "block";
      }
    });

    showQuestion(); // initial call
  </script>
</body>
</html>
